<div class="app-form-container">
  <div class="app-form-card shadow-sm">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="fw-bold mb-0">{{editMode ? 'Update Deployment': 'Create Deployment'}}</h5>
      <button type="button" class="btn-close" aria-label="Close" (click)="onClose()"></button>
    </div>

    <hr />

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
     
<div class="mb-3">
        <label for="milestone" class="form-label">Milestone</label>
        <select class="form-select" formControlName="milestone" required="true">
          @for(title of milestone; track title){
          <option [value]="title">
            {{ title }}
          </option>
          }
        </select>
      </div>




       <div class="mb-3">
        <label for="appName" class="form-label">App Name</label>
        <select class="form-select" formControlName="app" required="true">
          @for(name of app; track name){
          <option [value]="name">
            {{ name }}
          </option>
          }
        </select>
      </div>


      <div class="mb-3">
        <label for="dtt_deploy" class="form-label">Date & Time</label>
        <input type="datetime-local" formControlName="dtt_deploy" class="form-control" id="dtt_deploy" placeholder="Enter Date & Time" />
      </div>

      <div class="mb-3">
        <label for="version" class="form-label">Version</label>
        <input type="text" formControlName="version" class="form-control" id="version" placeholder="Enter version" readonly/>
      </div>

      <div class="mb-4">
        <label for="git_tag" class="form-label">Git tag</label>
        <input type="text" formControlName="git_tag" class="form-control" id="git_tag" placeholder="Enter git tag" />
      </div>
           <div class="mb-4">
        <label for="docker_tag" class="form-label">Docker tag</label>
        <input type="text" formControlName="docker_tag" class="form-control" id="docker_tag" placeholder="Enter docker tag" />
      </div>
          <div class="mb-4">
  <div class="d-flex justify-content-between align-items-center">
    <label for="change_log" class="form-label mb-0">Change log</label>
    <button type="button" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center" (click)="onLoadChangeLog.emit()" [disabled]="isLoadingChangeLog">
      <span *ngIf="!isLoadingChangeLog" class="me-1">Load</span>
      <span *ngIf="isLoadingChangeLog" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
      <span *ngIf="isLoadingChangeLog">Loadingâ€¦</span>
    </button>
  </div>
  <textarea
    formControlName="change_log"
    class="form-control mt-2"
    id="change_log"
    placeholder="Enter changelog or click Load to fetch from server"
    rows="4"
  ></textarea>
</div>


      <div class="d-flex justify-content-center gap-3">
        <button type="button" class="btn btn-secondary px-4" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn btn-primary px-4">{{editMode ? 'Update': 'Save'}} </button>
      </div>


    </form>
  </div>
</div>
